# PATS EXPORTATION-----------------------------------------------------------
export PATH="$HOME/.local/bin:$PATH"

# RUN GOINFRE (Creates the links)
if [ -f "$HOME/init_goinfre.sh" ]; then
    source "$HOME/init_goinfre.sh" > /dev/null
fi

# CONDA ACTIVATION
if [ -f "$HOME/miniconda3/etc/profile.d/conda.sh" ]; then
	source "$HOME/miniconda3/etc/profile.d/conda.sh"  # commented out by conda initialize
    conda activate base
fi

# ---------------------------
# Zinit setup
# ---------------------------
ZINIT_HOME="${XDG_DATA_HOME:-${HOME}/.local/share}/zinit/zinit.git"
if [ ! -d "$ZINIT_HOME" ]; then
    mkdir -p "$(dirname "$ZINIT_HOME")"
    git clone https://github.com/zdharma-continuum/zinit.git "$ZINIT_HOME"
fi
source "${ZINIT_HOME}/zinit.zsh"

# ---------------------------
# Completion system
# ---------------------------
autoload -Uz compinit && compinit

# ---------------------------
# Plugins via zinit
# ---------------------------
zinit light Aloxaf/fzf-tab
zinit light zsh-users/zsh-syntax-highlighting
zinit light zsh-users/zsh-completions
zinit light zsh-users/zsh-autosuggestions
zinit snippet OMZP::git
zinit snippet OMZP::sudo
zinit cdreplay -q

# ---------------------------
# History config
# ---------------------------
HISTSIZE=500000
HISTFILE=~/.zsh_history
SAVEHIST=$HISTSIZE
HISTDUP=erase
setopt appendhistory sharehistory hist_ignore_space hist_ignore_all_dups \
       hist_save_no_dups hist_ignore_dups hist_find_no_dups

# ---------------------------
# Completion styling
# ---------------------------
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'
zstyle ':completion:*' list-colors "${(s.:.)LS_COLORS}"
zstyle ':completion:*' menu no
zstyle ':fzf-tab:complete:cd:*' fzf-preview 'eza $realpath'
zstyle ':fzf-tab:complete:__zoxide_z:*' fzf-preview 'eza $realpath'

# ---------------------------
# Core utility aliases
# ---------------------------
alias ..='cd ..'
alias l='eza -lh --icons=auto'
alias ls='eza -lia --icons=auto'
alias ll='eza -lha --icons=auto --sort=name --group-directories-first'
alias ld='eza -lhD --icons=auto'
alias mkdir='mkdir -p'
alias tree='tree -a -I .git'
alias c='clear'
alias e='exit'
alias vim='nvim'
alias v='nvim'
alias grep='rg --color=auto'
alias ssn='sudo shutdown now'
alias srn='sudo reboot now'
alias pdf='evince'
alias open='ranger'
alias wifi='nm-applet --indicator'

# ---------------------------
# Git aliases
# ---------------------------
alias gac='git add . && git commit -m'
alias gs='git status'
alias gpush='git push origin'
alias lg='lazygit'

# ---------------------------
# useful aliases
# ---------------------------
alias battery='upower -i /org/freedesktop/UPower/devices/battery_BAT1'
alias py='clear; python3'

# Hyprland Rotation Aliases
alias rotateinverted="hyprctl keyword monitor eDP-1, transform, 2"
alias rotatenormal="hyprctl keyword monitor eDP-1, transform, 0"
alias kitty_themes='kitten themes'
alias kitty_fonts='kitten choose-fonts'

lsfind() {
    ll "$1" | grep "$2"
}

# ---------------------------
# Clipboard aliases (Wayland)
# ---------------------------
alias pbcopy='wl-copy'
alias pbpaste='wl-paste'

# ---------------------------
# Shell integrations
eval "$(fzf --zsh)"
eval "$(zoxide init --cmd cd zsh)"
eval "$(starship init zsh)"

# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/goinfre/aarid/miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/goinfre/aarid/miniconda3/etc/profile.d/conda.sh" ]; then
        . "/goinfre/aarid/miniconda3/etc/profile.d/conda.sh"
    else
        export PATH="/goinfre/aarid/miniconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<

